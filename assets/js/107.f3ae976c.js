(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{824:function(t,e,a){"use strict";a.r(e);var n=a(5),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),a("p",[t._v("This article gives an example of usage of Spring Mybatis.")]),t._v(" "),a("h5",{attrs:{id:"_1-build-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-build-table"}},[t._v("#")]),t._v(" 1. Build table")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("create database studentDB;\nuse studentDB;\ncreate table student(id char(20) primary key,name varchar(40),age tinyint,sex char(1));\ninsert into student values('123','kincolle',22,'male');\ninsert into student values('456','jin',21,female');\n")])])]),a("h6",{attrs:{id:"_2-difine-bean-and-dao-and-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-difine-bean-and-dao-and-xml"}},[t._v("#")]),t._v(" 2. Difine bean and dao and xml")]),t._v(" "),a("p",[t._v("bean（student.java）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("@Component\npublic class Student {\n    private String id;\n    private String name;\n    private byte age;\n    private String sex;\n    public String getId() {\n        return id;\n    }\n    public void setId(String id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public int getAge() {\n        return age;\n    }\n    public void setAge(byte age) {\n        this.age = age;\n    }\n    public String getSex() {\n        return sex;\n    }\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n}\n")])])]),a("p",[t._v("dao（studentDao.java）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("public interface StudentDao {\n    public int updateStudent(Student s);\n    public List<Student> getAllStudent();\n}\n")])])]),a("p",[t._v("XML（studentDao.xml）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   \n"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> \n<mapper namespace="com.kincolle.dao.StudentDao">\n    <update id="updateStudent" parameterType="com.kincolle.beans.Student">\n        update student set name=#{name},age=#{age},sex=#{sex} where id=#{id}\n    </update>\n    <resultMap type="com.kincolle.beans.Student" id="students">\n        <id column="id" property="id" jdbcType="CHAR"/>\n        <result column="name" property="name" jdbcType="VARCHAR"/>\n        <result column="age" property="age" jdbcType="TINYINT" />\n        <result column="sex" property="sex" jdbcType="CHAR"/>\n    </resultMap>\n    <select id="getAllStudent" resultMap="students">\n        select * from student\n    </select>\n</mapper>\n')])])]),a("p",[t._v("mybatis.xml")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"> \n<configuration>\n    <mappers>\n        <mapper resource="com/kincolle/dao/StudentDao.xml"/>\n    </mappers>\n</configuration>\n')])])]),a("h5",{attrs:{id:"_2-spring-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-spring-xml"}},[t._v("#")]),t._v(" 2. spring.xml")]),t._v(" "),a("h6",{attrs:{id:"config-mysql-datasource"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-mysql-datasource"}},[t._v("#")]),t._v(" config mysql datasource")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('<bean id="dataSource"                   class="org.springframework.jdbc.datasource.DriverManagerDataSource">\n        <property name="driverClassName" value="com.mysql.jdbc.Driver"></property>\n        <property name="url" value="jdbc:mysql://localhost:3306/newsDB?characterEncoding=UTF-8"></property>\n        <property name="username" value="root"></property>\n        <property name="password" value="123456"></property>\n</bean>\n')])])]),a("h6",{attrs:{id:"config-sqlsessionfactory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-sqlsessionfactory"}},[t._v("#")]),t._v(" config sqlsessionfactory")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">\n            <property name="configLocation" value="classpath:MyBatis-Configuration.xml"></property>\n            <property name="dataSource" ref="dataSource" />\n</bean>\n')])])]),a("h6",{attrs:{id:"config-studentdao"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-studentdao"}},[t._v("#")]),t._v(" config studentDao")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('<bean id="studentDao" class="org.mybatis.spring.mapper.MapperFactoryBean">  \n    <property name="mapperInterface" value="com.kincolle.dao.StudentDao"></property>  \n    <property name="sqlSessionFactory" ref="sqlSessionFactory"></property>  \n</bean> \n')])])]),a("h5",{attrs:{id:"_5-test"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-test"}},[t._v("#")]),t._v(" 5. test")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('public class Main {\n    public static void main(String[] args) {\n        ApplicationContext atc = new ClassPathXmlApplicationContext("spring.xml");\n        Student s = (Student) atc.getBean("student");\n        s.setId("123");\n        s.setName("kincolle");\n        s.setAge((byte)22);\n        s.setSex("male");\n\n        StudentDao dao = (StudentDao) atc.getBean("studentDao");\n        System.out.println(dao.updateStudent(s));\n    }\n\n}\n')])])]),a("p",[t._v("the result is 1.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('public class Main {\n    public static void main(String[] args) {\n        ApplicationContext atc = new ClassPathXmlApplicationContext("spring.xml");      \n        StudentDao dao = (StudentDao) atc.getBean("studentDao");\n        List<Student> students = dao.getAllStudent();\n        System.out.println(students.size());\n    }\n}\n')])])]),a("p",[t._v("the result is 2.")])])}),[],!1,null,null,null);e.default=s.exports}}]);