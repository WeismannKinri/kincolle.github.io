(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{477:function(t,e,n){t.exports=n.p+"assets/img/1.0ba25ace.png"},478:function(t,e,n){t.exports=n.p+"assets/img/2.5dd853bd.png"},479:function(t,e,n){t.exports=n.p+"assets/img/3.ee99e430.png"},480:function(t,e,n){t.exports=n.p+"assets/img/4.1a359f64.png"},481:function(t,e,n){t.exports=n.p+"assets/img/5.ca7ea958.png"},482:function(t,e,n){t.exports=n.p+"assets/img/6.00e2bb01.png"},483:function(t,e,n){t.exports=n.p+"assets/img/7.95b2e6d7.png"},484:function(t,e,n){t.exports=n.p+"assets/img/8.80801a7f.png"},485:function(t,e,n){t.exports=n.p+"assets/img/9.04e3fc6d.png"},637:function(t,e,n){"use strict";n.r(e);var i=n(0),r=Object(i.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h2",{attrs:{id:"_1-definition-of-tree"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_1-definition-of-tree"}},[t._v("#")]),t._v(" 1. Definition of Tree")]),t._v(" "),i("p",[t._v("AVL Tree is a kind of Binary Search Tree that it keeps a balance which means its weight need to be kept at O(logN)")]),t._v(" "),i("h2",{attrs:{id:"_2-balance-condition"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_2-balance-condition"}},[t._v("#")]),t._v(" 2. Balance Condition")]),t._v(" "),i("p",[t._v("The balance condition of AVL Tree is that in a binary tree the balance factor of a node N is defined to be the height difference")]),t._v(" "),i("blockquote",[i("p",[t._v("BalanceFactor(N) := Height(RightSubtree(N)) – Height(LeftSubtree(N))")])]),t._v(" "),i("p",[t._v("of its two child subtrees. A binary tree is defined to be an AVL tree if the invariant")]),t._v(" "),i("blockquote",[i("p",[t._v("BalanceFactor(N) ∈ {–1,0,+1}")])]),t._v(" "),i("p",[t._v("holds for every node N in the tree.")]),t._v(" "),i("p",[t._v("The following picture is a example of an AVL Tree:")]),t._v(" "),i("p",[i("img",{attrs:{src:n(477),alt:""}})]),t._v(" "),i("p",[t._v("The following picture is a example of an none AVL Tree:")]),t._v(" "),i("p",[i("img",{attrs:{src:n(478),alt:""}})]),t._v(" "),i("h2",{attrs:{id:"_3-rotation"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-rotation"}},[t._v("#")]),t._v(" 3. Rotation")]),t._v(" "),i("p",[t._v("Every inserting operation may destroy the balance, so we need to do rotation to make the balance right. The aim of rotation is reducing height, it means rotate subtree with higher height to go up.")]),t._v(" "),i("ul",[i("li",[t._v("Rotate left and torate right means use a subtree as the base point: if b is subtree of a, then rotate a around b")]),t._v(" "),i("li",[t._v("If b is a left subtree of a, the around b rotate a goto right, it seems a goes down and becomes right subtree of b")]),t._v(" "),i("li",[i("ul",[i("li",[t._v("If b is a right subtree of a, the around b rotate a goto left, it seems a goes down and becomes left subtree of b")])])])]),t._v(" "),i("p",[t._v("When insert a node there are 4 kinds of situations:")]),t._v(" "),i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center"}},[t._v("Insert Type")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("Rotate type")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("LL")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("Rotate Right")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("RR")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("Rotate Left")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("LR")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("Rotate Right After Rotate Left")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("RL")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("Rotate Left After Rotate Right")])])])]),t._v(" "),i("h3",{attrs:{id:"_3-1-ll-rotate-right"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-ll-rotate-right"}},[t._v("#")]),t._v(" 3.1 LL Rotate Right")]),t._v(" "),i("p",[t._v("This is a simple AVL Tree.\n"),i("img",{attrs:{src:n(479),alt:""}})]),t._v(" "),i("p",[t._v("At this time it is in balance. If we insert a element with value of 3, the it will be like:\n"),i("img",{attrs:{src:n(480),alt:""}})]),t._v(" "),i("p",[t._v("First of all we need to find which balance has been destroyed, the retate the tree. Since it is destroyed by node 3, so the wrong tree is from node 3 to node 8. Find the nearest node from the node 3 to do rotation, that is node 7. The height of left subtree of node 7 is 1 and that of right is -1, so it is not in balance. It needs to do rotation right.")]),t._v(" "),i("p",[t._v("First, we peek the subtree:\n"),i("img",{attrs:{src:n(481),alt:""}})]),t._v(" "),i("p",[t._v("It is not in balance apparently. This node 5 is higher, so we need to make the node 5 go up. Then the node 7 we go down to the right of node 5.")]),t._v(" "),i("p",[t._v("This is rotate right:\n"),i("img",{attrs:{src:n(482),alt:""}})]),t._v(" "),i("p",[t._v("Then keep on finding, and find every node fulfill the balance condition. So the whole tree becomes an AVL Tree.")]),t._v(" "),i("h3",{attrs:{id:"_3-2-rr-rotate-left"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-rr-rotate-left"}},[t._v("#")]),t._v(" 3.2 RR Rotate Left")]),t._v(" "),i("p",[t._v('It is the same as "LL Rotate Right"\n'),i("img",{attrs:{src:n(483),alt:""}})]),t._v(" "),i("h3",{attrs:{id:"_3-3-lr-rotate-right-after-rotate-left"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-lr-rotate-right-after-rotate-left"}},[t._v("#")]),t._v(" 3.3 LR Rotate Right After Rotate Left")]),t._v(" "),i("p",[t._v("In the first example if we insert 6 not 3, then it will be like the following:\n"),i("img",{attrs:{src:n(484),alt:""}})]),t._v(" "),i("p",[t._v("Its balance has been destroyed apparently but at this time you can fix it by just rateting one time. From 6 to 7 you need do Rotate Right After Rotate Left:\n"),i("img",{attrs:{src:n(485),alt:""}})]),t._v(" "),i("h3",{attrs:{id:"_3-4-rl-rotate-left-after-rotate-right"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-rl-rotate-left-after-rotate-right"}},[t._v("#")]),t._v(" 3.4 RL Rotate Left After Rotate Right")]),t._v(" "),i("p",[t._v('It is the same as "LR Rotate Right After Rotate Left":')]),t._v(" "),i("h2",{attrs:{id:"_4-code-example"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_4-code-example"}},[t._v("#")]),t._v(" 4 Code Example")]),t._v(" "),i("p",[t._v("First of all build a node class:")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[t._v("private static class AVLNode<E>  {\n    E element;\n    AVLNode<E> left;\n    AVLNode<E> right;\n    int height;\n\n    public AVLNode(E element) {\n        this(element, null, null);\n    }\n\n    public AVLNode(E element, AVLNode<E> left, AVLNode<E> right) {\n        this.element = element;\n        this.left = left;\n        this.right = right;\n    }\n}\n")])])]),i("p",[t._v("The build a class has insert(), remove(), height()")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[t._v('public class MyAVLTree<E extends Comparable<E>> {\n    private AVLNode root;\n\n    public MyAVLTree() {\n        this.root = null;\n    }\n\n    public void insert(E x) {\n        root = insert(x, root);\n    }\n\n    public void remove(E x) {\n        remove(x, root);\n    }\n\n    public int height() {\n        return height(root);\n    }\n\n    public AVLNode<E> insert(E x, AVLNode<E> t) {\n        if (t == null) {\n            return new AVLNode<E>(x);\n        }\n        int compareResult = x.compareTo(t.element);\n        if (compareResult < 0) {\n            t.left = insert(x, t.left);\n            if (height(t.left) - height(t.right) == 2) {\n                if (x.compareTo(t.left.element) < 0) {\n                    t = rightRotate(t);\n                } else {\n                    t = leftAndRightRotate(t);\n                }\n            }\n        } else if (compareResult > 0) {\n            t.right = insert(x, t.right);\n            if (height(t.right) - height(t.left) == 2) {\n                if (x.compareTo(t.right.element) > 0) {\n                    t = leftRotate(t);\n                } else {\n                    t = rightAndLeftRotate(t);\n                }\n            }\n        } else {\n        }\n        t.height = Math.max(height(t.left), height(t.right)) + 1;\n        return t;\n    }\n\n    private AVLNode<E> remove(E x, AVLNode<E> t) {\n        if (t == null)\n            return null;\n        int compareResult = x.compareTo(t.element);\n        if (compareResult < 0) {\n            t.left = remove(x, t.left);\n            if (t.right != null) {     \n                if (t.left == null) {  \n                    if (height(t.right) - t.height == 2) {\n                        AVLNode<E> k = t.right;\n                        if (k.right != null) {        \n                            t = leftRotate(t);\n                        } else {                      \n                            t = rightAndLeftRotate(t);\n                        }\n                    }\n                }\n                if (t.left!=null){     \n                    AVLNode<E> k = t.left;\n                    if (k.right != null) {\n                        if (height(k.left) - height(k.right) == 2) {\n                            AVLNode<E> m = k.left;\n                            if (m.left != null) {     \n                                k = rightRotate(k);\n                            } else {                  \n                                k = leftAndRightRotate(k);\n                            }\n                        }\n                    } else {\n                        if (height(k.left) - k.height == 2) {\n                            AVLNode<E> m = k.left;\n                            if (m.left != null) {    \n                                k = rightRotate(k);\n                            } else {                    \n                                k = leftAndRightRotate(k);\n                            }\n                        }\n                    }\n                    if (height(t.right) - height(t.left) == 2) {\n                        t = leftRotate(t);\n                    }\n                }\n            }\n            t.height = Math.max(height(t.left), height(t.right)) + 1;\n        } else if (compareResult > 0) {\n            t.right = remove(x, t.right);\n            if (t.left != null) {    \n                t = balanceChild(t);\n            }\n            t.height = Math.max(height(t.left), height(t.right)) + 1;\n        } else if (t.left != null && t.right != null) {\n            AVLNode<E> min = t.right;\n            while (min.left != null) {\n                min = min.left;\n            }\n            t.element = min.element;\n            t.right = remove(t.element, t.right);\n            t = balanceChild(t);\n            \n            t.height = Math.max(height(t.left), height(t.right)) + 1;\n        } else {\n            t = (t.left != null) ? t.left : t.right;\n        }\n        return t;\n    }\n\n    private AVLNode<E> balanceChild(AVLNode<E> t) {\n        if (t.right == null) {        \n            if (height(t.left) - t.height == 2) {\n                AVLNode<E> k = t.left;\n                if (k.left != null) {\n                    t = rightRotate(t);\n                } else {\n                    t = leftAndRightRotate(t);\n                }\n            }\n        } else {              \n            AVLNode<E> k = t.right;\n\n            if (k.left != null) {\n                if (height(k.right) - height(k.left) == 2) {\n                    AVLNode<E> m = k.right;\n                    if (m.right != null) {        \n                        k = leftRotate(k);\n                    } else {                      \n                        k = rightAndLeftRotate(k);\n                    }\n                }\n            } else {\n                if (height(k.right) - k.height == 2) {\n                    AVLNode<E> m = k.right;\n                    if (m.right != null) {      \n                        k = leftRotate(k);\n                    } else {                    \n                        k = rightAndLeftRotate(k);\n                    }\n                }\n            }\n            if (height(t.left) - height(t.right) == 2) {\n                t = rightRotate(t);\n            }\n        }\n        return t;\n    }\n \n    private AVLNode<E> rightRotate(AVLNode<E> t) {\n        AVLNode newTree = t.left;\n        t.left = newTree.right;\n        newTree.right = t;\n        t.height = Math.max(height(t.left), height(t.right)) + 1;\n        newTree.height = Math.max(height(newTree.left), height(newTree.right)) + 1;\n        return newTree;\n    }\n\n    private AVLNode<E> leftRotate(AVLNode t) {\n        AVLNode<E> newTree = t.right;\n        t.right = newTree.left;\n        newTree.left = t;\n        t.height = Math.max(height(t.left), height(t.right)) + 1;\n        newTree.height = Math.max(height(newTree.left), height(newTree.right)) + 1;\n        return newTree;\n    }\n\n    private AVLNode<E> leftAndRightRotate(AVLNode<E> t) {\n        t.left = leftRotate(t.left);\n        return rightRotate(t);\n    }\n\n    private AVLNode<E> rightAndLeftRotate(AVLNode<E> t) {\n        t.right = rightRotate(t.right);\n        return leftRotate(t);\n    }\n\n    private int height(AVLNode<E> t) {\n        return t == null ? -1 : t.height;\n    }\n\n    public void printTree() {\n        printTree(root);\n    }\n\n    private void printTree(AVLNode<E> tree) {\n        if (tree == null) {\n            return;\n        }\n        System.out.print(tree.element + " ");\n        printTree(tree.left);\n        printTree(tree.right);\n\n    }\n\n    private static class AVLNode<E> {\n        E element;\n        AVLNode<E> left;\n        AVLNode<E> right;\n        int height;\n\n        public AVLNode(E element) {\n            this(element, null, null);\n        }\n\n        public AVLNode(E element, AVLNode<E> left, AVLNode<E> right) {\n            this.element = element;\n            this.left = left;\n            this.right = right;\n        }\n    }\n}\n')])])]),i("p",[t._v("Then test the function:")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[t._v('public static void main(String[] args) {\n    MySearchTree<Integer> searchTree = new MySearchTree<>();\n    for (int i = 0; i < 10; i++) {\n        searchTree.insert(i);\n    }\n    MyAVLTree<Integer> avlTree = new MyAVLTree<>();\n    for (int i = 0; i < 10; i++) {\n        avlTree.insert(i);\n        System.out.println("insert"+i+" then the height of tree is" + avlTree.height());\n    }\n    System.out.println("search order:");\n    searchTree.printTree();\n    System.out.println();\n    System.out.println("AVL search orderf:");\n    avlTree.printTree();\n}\n')])])])])}),[],!1,null,null,null);e.default=r.exports}}]);